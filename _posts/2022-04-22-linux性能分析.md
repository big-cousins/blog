---
layout: post
title: linux性能分析
categories: Blog
keywords: linux 性能
---


## 方法论

一个服务出现慢查询下迅速定位问题代码：

1. top查看CPU负载
2. 高的话分析On-CPU，低的话分析Off-CPU
3. 跑cpudist查看是否是Off-CPU的问题
4. 跑bcc-offcputime/Systemtap查找出现问题的堆栈
5. 可以用动态追踪更加细化的分析到底是内核哪里出现问题（磁盘，网络，内存，锁）（Off-CPU过高基本是内核/资源的问题）
6. 如果是On-CPU的话就从日志出发进行排错了。
